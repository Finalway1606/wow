<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WoW Classic - Wybierz klasę i rasę</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: #f0f0f0; }
    h1 { color: #ffd700; }
    .form-section { margin-bottom: 20px; }
    .checkbox-group { display: flex; flex-wrap: wrap; gap: 10px; }
    label { display: flex; align-items: center; gap: 5px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #444; padding: 8px; text-align: center; }
    th { background-color: #333; }
    button { padding: 10px 20px; cursor: pointer; background-color: #444; color: white; border: none; }
    button:hover { background-color: #666; }
  </style>
</head>
<body>
  <h1>Wybierz klasę i rasę - WoW Classic</h1>

  <form id="selectionForm">
    <div class="form-section">
      <h3>Klasy:</h3>
      <div class="checkbox-group" id="classCheckboxes"></div>
    </div>

    <div class="form-section">
      <h3>Rasy:</h3>
      <div class="checkbox-group" id="raceCheckboxes"></div>
    </div>

    <button type="submit">Zapisz wybór</button>
  </form>

  <h2>Wyniki:</h2>
  <table id="resultsTable">
    <thead>
      <tr>
        <th>Klasa</th>
        <th>Rasa</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h2>Statystyki:</h2>
  <ul id="statsList"></ul>

  <script>
    const wowClasses = [
      'Warrior', 'Paladin', 'Hunter', 'Rogue', 'Priest', 'Shaman',
      'Mage', 'Warlock', 'Druid'
    ];

    const wowRaces = [
      'Human', 'Dwarf', 'Night Elf', 'Gnome', 'Orc', 'Undead',
      'Tauren', 'Troll'
    ];

    const raceClassMap = {
      'Human': ['Warrior', 'Paladin', 'Rogue', 'Priest', 'Mage', 'Warlock'],
      'Dwarf': ['Warrior', 'Paladin', 'Hunter', 'Rogue', 'Priest'],
      'Night Elf': ['Warrior', 'Hunter', 'Rogue', 'Priest', 'Druid'],
      'Gnome': ['Warrior', 'Rogue', 'Mage', 'Warlock'],
      'Orc': ['Warrior', 'Hunter', 'Rogue', 'Shaman', 'Warlock'],
      'Undead': ['Warrior', 'Rogue', 'Priest', 'Mage', 'Warlock'],
      'Tauren': ['Warrior', 'Hunter', 'Shaman', 'Druid'],
      'Troll': ['Warrior', 'Hunter', 'Rogue', 'Priest', 'Shaman', 'Mage', 'Warlock']
    };

    const stats = {};

    const classContainer = document.getElementById('classCheckboxes');
    const raceContainer = document.getElementById('raceCheckboxes');
    const statsList = document.getElementById('statsList');

    function createCheckbox(name, groupName) {
      const label = document.createElement('label');
      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.name = groupName;
      checkbox.value = name;
      checkbox.addEventListener('change', () => enforceSingleSelection(groupName));
      label.appendChild(checkbox);
      label.appendChild(document.createTextNode(name));
      return label;
    }

    function enforceSingleSelection(groupName) {
      const checkboxes = document.querySelectorAll(`input[name='${groupName}']`);
      let selected = 0;
      checkboxes.forEach(cb => {
        if (cb.checked) selected++;
      });
      if (selected > 1) {
        alert('Można wybrać tylko jedną opcję z każdej grupy.');
        event.target.checked = false;
      }
    }

    function updateStatsDisplay() {
      statsList.innerHTML = '';
      Object.entries(stats).forEach(([key, count]) => {
        const li = document.createElement('li');
        li.textContent = `${key} - ${count}`;
        statsList.appendChild(li);
      });
    }

    wowClasses.forEach(cls => classContainer.appendChild(createCheckbox(cls, 'class')));
    wowRaces.forEach(race => raceContainer.appendChild(createCheckbox(race, 'race')));

    document.getElementById('selectionForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const selectedClass = document.querySelector("input[name='class']:checked");
      const selectedRace = document.querySelector("input[name='race']:checked");

      if (!selectedClass || !selectedRace) {
        alert('Proszę wybrać jedną klasę i jedną rasę.');
        return;
      }

      const allowedClasses = raceClassMap[selectedRace.value];
      if (!allowedClasses.includes(selectedClass.value)) {
        alert(`Rasa ${selectedRace.value} nie może być klasą ${selectedClass.value}.`);
        return;
      }

      const comboKey = `${selectedRace.value} ${selectedClass.value}`;
      stats[comboKey] = (stats[comboKey] || 0) + 1;
      updateStatsDisplay();

      const table = document.querySelector('#resultsTable tbody');
      const row = document.createElement('tr');
      const classCell = document.createElement('td');
      classCell.textContent = selectedClass.value;
      const raceCell = document.createElement('td');
      raceCell.textContent = selectedRace.value;
      row.appendChild(classCell);
      row.appendChild(raceCell);
      table.appendChild(row);

      selectedClass.checked = false;
      selectedRace.checked = false;
    });
  </script>
</body>
</html>
